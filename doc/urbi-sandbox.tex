%% Copyright (C) 2010, 2011, Gostai S.A.S.
%%
%% This software is provided "as is" without warranty of any kind,
%% either expressed or implied, including but not limited to the
%% implied warranties of fitness for a particular purpose.
%%
%% See the LICENSE file for more information.

\documentclass[openright,twoside,11pt]{book}
  \usepackage{gostai-documentation}
  \usepackage{config}
  \usepackage{lipsum}  % to provide "filler" text

%% \marginNotation{Label}{Text}
%% ----------------------------
\newcommand{\marginNotation}[2]
{%
  \marginpar[{\vspace{3mm}\raggedleft\tiny\hyperref[#1]{#2}}]
            {\vspace{3mm}\raggedright\tiny\hyperref[#1]{#2}}%
}

\ifx\ifHtml\undefined
  \renewcommand{\bnfPre}
    {\marginNotation{sec:notations:bnf}{Grammar}}
  \renewcommand{\cxxPre}
    {\marginNotation{sec:notations:cxx}{\Cxx}}
  \renewcommand{\javaPre}
    {\marginNotation{sec:notations:java}{\Java}}
  \renewcommand{\shellPre}
    {\marginNotation{sec:notations:shell}{Shell\\Session}}
  \renewcommand{\urbiassertPre}
    {\marginNotation{sec:notations:urbiassert}{Assertion\\Block}}
  \renewcommand{\urbiscriptPre}
    {\marginNotation{sec:notations:urbiassert}{\us\\Session}}
  \renewcommand{\urbiuncheckedPre}
    {\urbiscriptPre}
\fi

\title{Urbi Documentation Sandbox}
\subtitle{Version \VcsDescription}
\author{Gostai}

\begin{document}

\maketitle

This document is meant to be used to toy with \LaTeX{}.

\tableofcontents
\part{First Part}

\chapter{First Chapter}

This is the first chapter.

\begin{urbiscript}
1+2;
[00048238] 3
"foo";
[00048238] "foo"
\end{urbiscript}

Another example.

\begin{shell}[style=varInString]
$ export PATH="something:\var{urbi-root}/bin:$PATH"
\end{shell}%$

\begin{urbiunchecked}[style=varInString]
"for \var{foo}" * (1+2);
[00048238] wrong
\end{urbiunchecked}

Last example.

\begin{urbiassert}
1+2 == 3;
\end{urbiassert}

% \release{Release}{Date}
% -----------------------
\newcommand{\release}[2]{%
  \ifx\ifHtml\undefined%
    Released on #2.
    \marginpar{%
      \includegraphics[width=\marginparwidth]{figs/urbi-sdk/#1/cube}

      #2.
    }%
  \else
    \includegraphics[width=.2\textwidth]{figs/urbi-sdk/#1/cube},
    released on #2.
  \fi%
}

\section{\usdk 2.5}
\release{2.5}{2010-11-xx}

\subsection{New Features}
\begin{itemize}
\item More types of empty statements are warned about.  For instance \urbi
  used to accept silently \lstinline|if (foo);|.  It now warns about the empty
  body, and recommends writing \lstinline|if (foo) {};|.
\end{itemize}

\section{\usdk 2.4}
\release{2.4}{2010-11-xx}

\subsection{New Features}
\begin{itemize}
\item More types of empty statements are warned about.  For instance \urbi
  used to accept silently \lstinline|if (foo);|.  It now warns about the empty
  body, and recommends writing \lstinline|if (foo) {};|.
\end{itemize}

\section{\usdk 2.3}
\release{2.3}{2010-11-xx}

\subsection{New Features}
\begin{itemize}
\item More types of empty statements are warned about.  For instance \urbi
  used to accept silently \lstinline|if (foo);|.  It now warns about the empty
  body, and recommends writing \lstinline|if (foo) {};|.
\end{itemize}


\sectionObject{Bar}

\begin{urbiscriptapi}
\item[bar] This is Bar.bar.
\item[foo](<x>) This is Bar.foo with arguments.
\item[set](<key>, <value>) Map \var{key} to \var{value} and return \this so
  that invocations to \lstinline|set| can be chained.  The possibly existing
  previous mapping is overridden.
\item \lstinline|I do it myself|
\item beware (not to catch the first word)
\item|slot[foo][bar]| a slot
\item|fun[foo][bar]|(<var>) a function
\end{urbiscriptapi}

\sectionObject{Foo}

\begin{urbiscriptapi}
\item[bar] This is Foo.bar.
\item[foo] This is Foo.foo.
\end{urbiscriptapi}

\section{Second Section}

\begin{urbiunchecked}[escapeinside=<>]
#<Été>;
[00048238:error] !!! invalid character: `#'
[00048239:error] !!! invalid character: `\xc3'
[00048239:error] !!! invalid character: `\x89'
[00048239:error] !!! invalid character: `\xc3'
[00048239:error] !!! invalid character: `\xa9'
\end{urbiunchecked}

\chapter{Second Chapter}

This is the second chapter.

\urbitrajectory{smooth}

\urbitrajectory{accel}

\begin{urbiscriptapi}
\item[count] Return the count.
\item[launch]
  Fire \this.
\item \lstinline|launch|~\\
  Fire \this.

\end{urbiscriptapi}

\part{Second Part}
\label{sec:second}
This is the second part.

\chapter{Chapter II.1}

You want to use \refSlot[Foo]{foo}, and possibly \refSlot[Bar]{foo}.

\chapterIndex
\end{document}

%%% Local Variables:
%%% mode: latex
%%% coding: utf-8
%%% TeX-master: t
%%% ispell-dictionary: "american"
%%% ispell-personal-dictionary: "urbi.dict"
%%% fill-column: 76
%%% End:
